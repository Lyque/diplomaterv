%----------------------------------------------------------------------------
\chapter{Operációs rendszerek bemutatása}
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
\section{Használt fejlesztõkártyák}
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
\subsection{STM32F4~Discovery}
%----------------------------------------------------------------------------

Manapság egyre inkább teret nyernek maguknak az ARM alapú mikrokontrollerek, melyek nem csak nagy számítási kapacitásukkal, de egyre alacsonyabb árukkal szorítják ki versenytársaikat. Az egyik legelterjedtebb gyártó, az STMicroelectronics (továbbiakban STM) több fejlesztõkártyát is piacra bocsátott az elmúlt években, melyeken különbözõ mikrokontrollerek képességeit ismerheti meg a fejlesztõ. A kapható fejlesztõkártyák amellett, hogy megkímélik a fejlesztõt a saját hardver tervezésétõl -- így a tervezési hibából adódó problémák keresésétõl is --, a legtöbb esetben a gyártó széles körû támogatást is nyújt a termékekhez (mintaprogramok, fórumok, stb.).

Az STM által gyártott fejlesztõkártyák közül ár-érték arányának köszönhetõen talán a leggyakrabban használt az STM32F407 Discovery kártya. A rajta található mikrokontroller rendelkezik a legtöbb alkalmazásban elõforduló perifériák mindegyikével. A teljesség igénye nélkül:

\begin{itemize}
\item GPIO-k,
\item Soros kommunikációs portok (szinkron és aszinkron egyaránt),
\item Ethernet port,
\item Analog-Digital Converter,
\item Digital-Analog Converter,
\item Idõzítõk,
\item High-Speed~USB (OTG támogatással),
\item SPI,
\item I2C,
\item I2S,
\item SDIO (SD illetve MMC kártya kezeléséhez),
\item CAN,
\item Szoftveres és hardveres magszakítások.
\end{itemize}

A nagyszámú periféria mellett a mikrokontroller számítási kapacitása is kimagaslik a hasonló árkategóriájú eszközök körébõl, köszönhetõen az akár 168~MHz-es órajelének, a beépített CRC és lebegõ pontos aritmetikai egységének, illetve a több perifériát is kezelni képes DMA-knak.

Az eszköz 1~MByte Flash memóriával és 192~kbyte RAM-mal rendelkezik.

A kártyán megtalálható több periféria, mely a különbözõ interfészek kipróbálását teszi lehetõvé (mint például gyorsulásszenzor, mikrofon).

\begin{figure}[h!]
\center
\resizebox{8cm}{!}{
\includegraphics{figures/Eval_Boards/01_STM32F4-Discovery.jpg}}
\caption{STM32F4 Discovery fejlesztõkártya.}
\label{fig:01_STM32F4-Discovery}
\end{figure}


\subsubsection{STM32F4 Discovery - Base Board}

Az STM32F4 Discovery fejlesztõeszközhöz több kiegészítõ kártya is kapható, melyek célja a kipróbálható perifériák számának növelése. Egyik ilyen bõvítõkártya az STM32F4DIS-BB, ami tartalmaz microSD-kártya foglalatot, az Ethernet interfész fizikai rétegét megvalósító IC-t, illetve a csatlakoztatáshoz szükséges RJ45-ös csatlakozót. Ezen kívül található rajta egy DB9-es csatlakozó -- mely az egyik soros kommunikációs portot teszi elérhetõvé --, egy FPC csatlakozó -- mely kamera csatlakoztatását teszi lehetõvé --, illetve az egyik oldali csatlakozósorra ráköthetõ 3,5~"-os TFT kijelzõ.

\begin{figure}[h!]
\center
\resizebox{8cm}{!}{
\includegraphics{figures/Eval_Boards/02_STM32F4DIS-BB.jpg}}
\caption{STM32F4 Discovery BaseBoard kiegészítõ kártya.}
\label{fig:02_STM32F4DIS-BB}
\end{figure}

%----------------------------------------------------------------------------
\subsection{Raspberry~Pi~3}
%----------------------------------------------------------------------------

A Raspberry Pi Foundation-t 2008-ban alapították azzal a céllal, hogy a informatikai tudományok területén segítse az oktatást.

Az elsõ nagyteljesítményû, bankkártya méretû számítógépüket 2012 februárjában bocsátották piacra, melynek ára töredéke volt az asztali számítógépekének. Azóta több verziója is megjelent az eszköznek, melyet folyamatosan fejlesztettek mind teljesítményben, mind az integrált funkciók számában. 2015 novemberében a világ elsõ 5\,\$-os számítógépével jelentek meg a piacon, melynek a Raspberry~Pi~Zero nevet adták.

A legújabb verziójú kártya, a Raspberry Pi 3 model B az elõzõ verzióhoz képest erõsebb processzort kapott, illetve tartalmaz beépített Bluetooth illetve WiFi modult.

\begin{figure}[h!]
\center
\resizebox{8cm}{!}{
\includegraphics{figures/Eval_Boards/03_Raspberry_Pi_3.jpg}}
\caption{Raspberry~Pi~3 bankkártya méretû PC.}
\label{fig:03_Raspberry_Pi_3-BB}
\end{figure}

A hardver fõbb jellemzõi:
\begin{itemize}
\item 1,2~GHz 64-bit quad-core ARMv8 CPU,
\item 802.11n Wireless LAN,
\item Bluetooth 4.1,
\item Bluetooth Low Energy,
\item 1~GB RAM,
\item 4 USB port,
\item 40 GPIO pin,
\item HDMI port,
\item Ethernet port,
\item Kombinált 3,5~mm-es jack aljzat (audio és kompozit videó),
\item MicroSD kártyafoglalat,
\item VideoCore IV GPU.
\end{itemize}

Interfészek:
\begin{itemize}
\item SPI,
\item UART,
\item DPI (Display Parallel Interface),
\item SDIO,
\item PCM (Pulse-code Modulation),
\item 1-WIRE,
\item JTAG,
\item GPCLK (General Purpose Clock),
\item PWM.
\end{itemize}

Már az elsõ verzió megjelenésekor rendelkezésre álltak különbözõ linux disztribúciók portjai, melyekkel az eszköz asztali számítógépként használható volt. Népszerûségének köszönhetõen a második verziótól kezdve már a Windows~10~IoT~Core is támogatja a platformot.

%----------------------------------------------------------------------------
\section{A választás szempontjai}
%----------------------------------------------------------------------------

Az operációs rendszerek kiválasztásánál elsõdleges szempont a hardverek támogatottsága, illetve az oktatási célra való elérhetõség volt.

%----------------------------------------------------------------------------
\subsection{STM32F4~Discovery}
%----------------------------------------------------------------------------

Az UBM Tech minden évben készít kutatást a beágyazott rendszereket piacán, melyben többek között a használt beágyazott operációs rendszerekkel kapcsolatban is publikál adatokat (a 2015-ös felmérés eredménye látható \afigref{01_OS_popularity}án). A statisztika alapján a két leggyakrabban használt operációs rendszer a \mbox{FreeRTOS} és a \mbox{\textmugreek C/OS--II}. A \textmugreek C/OS új verziója, a \mbox{\textmugreek C/OS--III} a listán hátrébb kapott helyet, de még így is befért a tíz vezetõ rendszer közé. Mindhárom operációs rendszer népszerûsége nõtt a 2014-es évhez képest.

\begin{figure}[h!]
\center
\resizebox{15cm}{!}{
\includegraphics{figures/OS_selection/01_OS_popularity.png}}
\caption{Az UBM~Tech által 2015-ben publikált beágyazott operációs rendszer használati statisztika.}
\label{fig:01_OS_popularity}
\end{figure}

Az STM32F4 Discovery kártyához elérhetõ szoftvercsomag tartalmazza a \mbox{FreeRTOS} rendszert, ami jelzi a rendszer támogatottságának mértékét. A \mbox{FreeRTOS} hivatalos oldalán megvásárolhatóak a rendszer használatát bemutató könyvek, illetve online elérhetõek leírások, amik szintén segítik a rendszer megismerését. Ezáltal az elsõ megvizsgált rendszernek a \mbox{FreeRTOS}-t választottam.

A Micrium \textmugreek C/OS rendszerei oktatási célra ingyenesen elérhetõek, beleértve a rendszer dokumentációit is. A választott másik rendszer a \mbox{\textmugreek C/OS--III}.

%----------------------------------------------------------------------------
\subsection{Raspberry~Pi~3}
%----------------------------------------------------------------------------

A Raspberry Pi megjelenése óta támogatja különbözõ linux disztribúciók futtatását az eszközön, és a fejlesztõkártya második verziója óta a Windows 10 IoT Core is telepíthetõ rá. Az asztali alkalmazás fejlesztõk körében mind a linux, mind a Windows elterjedten használt operációs rendszer, ezért a Raspberry Pi 3-on ezt a két rendszert vizsgálom meg.

%----------------------------------------------------------------------------
\input{FreeRTOS}
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
\input{ucos}
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
\input{linux}
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
\input{windows}
%----------------------------------------------------------------------------

\paragraph*{}

Sem a Raspbian-hoz, sem a Windows~10~IoT~Core-hoz nem érhetõ el részletes dokumentáció. Ez a Raspbian esetén magyarázható azzal, hogy egy elterjedt disztibúciót használ alapjául, ezáltal a rendszer mûködése nem különbözik nagy mértékben attól. A Windows~10~IoT~Core esetében a hivatalos oldalon elérhetõ \emph{Dokumentáció} szekció, de ott pár darab promóciós videót találunk a rendszerrõl.

Mindkettõ rendszerrõl elmondható, hogy nem hard real-time alkalmazásokhoz fejlesztik\footnote{Raspbian-hoz elérhetõek kernel patch-ek, melyekkel a real-time mûködés megvalósítható.}.

Az elérhetõ kommunikációs objektumok listáját a használt programozási nyelv, és az ahhoz elérhetõ könyvtárakban implementált objektumok határozzák meg. A manapság használt nyelvek többségében (pl. \Csh, \Cpp{ }a megfelelõ könyvtárak alkalmazásával) az alap objektumok elérhetõek.